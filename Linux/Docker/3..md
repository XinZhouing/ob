# 列出容器信息
`docker ps [选项]`
- 列出当前正在运行的容器：`docker ps`
- 列出所有容器：`docker ps -a`
- 列出所有退出状态的容器：`docker ps -f status=exited`
- 列出所有退出状态的容器的id：`docker ps -f status=exited -q`
## 容器继续运行的条件
- Docker 容器运行时必须要有一个前台进程，如果没有前台进程执行，容器认为空闲，就会自行退出。
# 创建并运行容器
`docker run[OPTIONS] IMAGE[COMMAND][ARG...]`
- OPTIONS: 需要重点关注-d、-p、-v、-e、--restaet
- IMAGE：镜像信息，推荐使用镜像名: TAG 的写法
- COMMAND：创建容器后要执行的命令
- ARG...：COMMAND 命令的参数
## 例如
- `docker run nginx:latest`
- `docker run nginx:latest ls`
- `docker run nginx:latest ls -a`
- `docker run -d ngix:lates ls -a`
## 运行方式
### 默认运行
`docker run nginx:latest`
### 后台运行
`docker run -d nginx:latest`
## 交互运行
`docker run -it nginx:latest`
主要在学习和调试阶段才会用到交互模式，并且一般容器的执行命令会使用 bash，这样才能在进入容器后操作：`docker run -it nginx:latest bash`
## 删除容器
`docker rm[选项][容器id或容器名...]`
### 例如 ：
- `docker rm qeq123`
- `docker rm qwe12 qwe123`
- 删除 hello-world 容器：`docker rm hello-world `
- 尝试删除一个运行的 nginx 容器：`docker rm -f nginx`
- 删除所有容器：`docker rm -f $(docker ps -aq)`
	- $()命令替换：可以讲命令输出结果作为字符串使用
- 删除所有非运行状态的容器：`docker rm -f $(docker ps -a status=exited -q) ` 或使用 `docker container prune`
## 进入容器
`docker exec[选项]容器id或容器名 命令[参数]`
- 已交互式的方式进入容器内部执行 curl 指令测试 nginx 是否启动成功：`docker exec -it nginx bash` -> `curl http://127.0.0.1` -> `exit`
## 查看容器日志
`docker logs[选项]容器id或容器名 `
- 查看 nginx 容器的日志，要求持续显示新的日志：`docker logs -f nginx`
- 查看 nginx 容器的最近 20 条日志：`docker logs -n 20 容器id`
## 容器文件拷贝
`docker cp[OPTIONS]CONTAINER:SRC_PATH DEST_PATH`: 把容器中的文件拷贝到宿主机中
`docker cp[OPTIONS]SRC_PATH CONTAINER:DEST_PATH`: 把宿主机的文件拷贝到容器中
- 拷贝任意文件到 nginx 中
```shell
➜  ~ docker cp /root/test.txt 8cea2b3b4f0d:/bin            
Successfully copied 2.05kB to 8cea2b3b4f0d:/usr/bin
```
- 拷贝 nginx 中的任意文件拷贝到宿主机中
```shell
➜  ~ docker cp 8cea2b3b4f0d:/usr/share/nginx/html /root    
Successfully copied 4.1kB to /root                         
➜  ~ ls                                                    
html  test.txt
```
## 停止和运行容器
### 停止容器
`docker stop [选项] [容器id或容器名... ]`
- 停止一个后台运行的 nginx 容器
```shell
➜  ~ docker stop 276e23991ca9          
276e23991ca9
```
### 运行一个停止的容器
`docker start [选项] [容器id或容器名... ]`
```shell
➜  ~ docker ps -a                                          
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS                          PORTS     NAMES     
276e23991ca9   nginx     "/docker-entrypoint.…"   2 minutes ago   Exited (0) About a minute ago             pedantic_bose 

➜  ~ docker start 276e23991ca9                             
276e23991ca9                                               
➜  ~ docker ps                                             
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES                      
276e23991ca9   nginx     "/docker-entrypoint.…"   2 minutes ago   Up 2 seconds   80/tcp    pedantic_bose
```