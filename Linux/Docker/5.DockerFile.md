# 概述
之前的方式去部署应用还是有点繁琐，因为之前使用的镜像并不能很好的符合我们自己的需求。
所以我们需要自定义一个更符合我们需求的镜像，使用起来会更加方便，而 DockerFile 就可以让我们自定义镜像
# 基本语法
- 不区分大小写，但是习惯大写
- 基本以 FROM 指令开头
- 注释使用#
# 快速入门
构建最简单的 hellworld 镜像
1️⃣创建文件：HelloWorld
2️⃣编写指令
```shell
FROM centos:7
CMD ["echo","helloworld"]
```
3️⃣编译镜像
`docker build -t hello:1.0 -f Helloworld . `
- -t: 用来指定镜像名和标签
- -f: 指定 DockerFile 文件
- .: 表示在当前目录下查找对应的 DockerFile 来构建镜像
运行容器测试
`docker run hello:1.0`
# 常用指令
## FROM
- 作用
用来定义基础镜像 
- 语法
`FROM 镜像名:标签名`
- 作用时机
构建镜像时
## CMD
- 作用
用来定义容器运行时默认命令。可以在使用 docker run 的时候覆盖掉 CMD 中的命令
- 用法
1️⃣`CMD ["命令1","参数1","命令2"]`
命令和参数作为 json 数组的元素去书写。这种形式不会解析环境变量，除非使用：`CMD ["sh","-c","echo $HOME"]`
2️⃣`CMD echo helloworld `
这种形式可以解析环境变量：`CMD echo $HOME`
- 在一个 DockerFile 写多个 CMD 时只有在最后一个 CMD 才会起作用
- 作用时机
运行镜像的时候
## ENV
- 作用
用来定义环境变量
- 用法
`ENV 变量名="变量值"`
- 作用时机
构建镜像的时候
- 需求
基于 Helloworld 的案例进行改造，要求打印的内容可以任意指定，具体内容在运行容器的时候通过修改环境变量的方式去指定
- 脚本
```shell
FROM centos:7
ENV CONTENT="helloworld"
CMD ["sh","-c","echo $CONTENT"]
```
- 测试
```shell
# 构建镜像
docker build -t test01:1 -f Test01 .
# 运行镜像并修改环境变量
docker run -e CONTENT=hellojava test:01
```
## WORKDIR
- 作用
用于设置当前的工作目录，如改目录不存在则会自动创建
- 用法
WORKDIR 目录
- 作用时机
构建镜像的时候
## RUN
- 作用
用来定义构建过程中要执行的命令
- 用法
`RUN 命令`
- 作用时机
构建镜像的时候
- 需求
定一个 CONTENT 变量，默认值为 hellodocker，在镜像的/app 目录下创建一个 test 目录，在其中创建一个 `content.txt` 文件，文件的内容为 CONTENT 变量的值。容器启动时打印 `content.txt` 的内容
- 脚本
```shell
FROM centos:7
EVN CONTENT="helloworld"
WORKDIR /app/test
RUN echo $CONTENT > content.txt 
CMD ["cat","content.txt]
```